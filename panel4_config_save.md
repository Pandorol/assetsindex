# Panel4 配置保存功能

## 功能概述

现在 Panel4 的动态移动功能支持**自动保存和恢复配置**，用户不需要每次打开扩展都重新设置正则表达式和目标目录。

## 保存的内容

每个移动项会保存以下配置：
- **移动项名称** (`name`)
- **正则表达式** (`regex`)  
- **目标目录** (`targetDir`)

**注意**：匹配结果和选中状态不会保存，因为这些是动态计算的。

## 自动保存时机

配置会在以下情况自动保存：

1. **添加新移动项**时
2. **删除移动项**时  
3. **修改正则表达式**时
4. **修改目标目录**时

用户无需手动保存，所有更改都会实时保存。

## 自动恢复时机

配置会在以下情况自动恢复：

1. **扩展重新加载**时
2. **面板重新打开**时
3. **Cocos Creator 重启**时

## 技术实现

### 保存机制
```typescript
// 使用 Editor.Profile API 保存配置
Editor.Profile.setConfig('assetsindex', 'panel4_moveItems', configs);
```

### 恢复机制  
```typescript
// 从 Editor.Profile 加载配置
const configs = await Editor.Profile.getConfig('assetsindex', 'panel4_moveItems');
```

### 配置格式
```json
[
    {
        "name": "移动项 1",
        "regex": ".*gg_zhenying.*\\.png$", 
        "targetDir": "test/moved/"
    },
    {
        "name": "移动项 2",
        "regex": ".*logo.*\\.png$",
        "targetDir": "ui/common/"
    }
]
```

## 用户体验

### 首次使用
1. 添加移动项
2. 设置正则表达式和目标目录
3. 配置自动保存

### 再次使用
1. 打开面板
2. 配置自动恢复
3. 可以直接使用，无需重新设置

## 测试步骤

1. **创建配置**：
   - 添加移动项
   - 设置正则：`.*gg_zhenying.*\.png$`
   - 设置目标：`test/moved/`

2. **验证保存**：
   - 重新加载扩展
   - 检查配置是否恢复

3. **验证修改**：
   - 修改正则表达式
   - 重新打开面板
   - 检查修改是否保存

4. **验证删除**：
   - 删除移动项
   - 重新打开面板  
   - 检查删除是否保存

## 优势

1. **用户友好**：无需重复设置常用配置
2. **自动化**：保存和恢复完全自动化
3. **持久化**：配置在项目级别保存，跨会话保持
4. **实时性**：配置更改立即保存

这个功能极大地提升了 Panel4 的易用性！
